
@page "/add-student"
@using webappapi.Client.Services;
@using webappapi.Shared;

<h3>Add Student</h3>

<EditForm Model="newStudent" OnValidSubmit="AddStudent">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <label for="Name">Name:</label>
    <InputText id="Name" @bind-Value="newStudent.Name" />

    <button type="submit">Save</button>
</EditForm>

@code {
    private Student newStudent = new Student();
    private List<Student> students;

    [Inject]
    private StudentService studentService { get; set; }

    private async Task AddStudent()
    {
        var addedStudent = await studentService.AddStudentAsync(newStudent);
        students.Add(addedStudent);
        newStudent = new Student(); // Clear the form
    }
}
